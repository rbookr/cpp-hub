
åˆ›å»ºè°ƒç”¨pre_order()

pre_order

-> co_yield {node.key,node.value} 
    |
    |- æŒ‚èµ·

æ ¹æ® [cppreference](https://en.cppreference.com/w/cpp/language/coroutines)coroutinesè¿è¡Œçš„è¿‡ç¨‹

- è°ƒç”¨`promise_type`çš„`constructor`
- è°ƒç”¨`promise.get_return_object()`å‡½æ•°
- è°ƒç”¨`promise.initial_suspend()`and`co_await` result

æ‰€ä»¥`pre_order`åˆšæ‰§è¡Œå°±ä¼šè¢«æš‚åœ

## ç†è§£1

é€’å½’çš„è°ƒç”¨,

ä¼šä¸åœçš„äº§ç”Ÿ`coroutines state`

æŒ‚èµ·ç‚¹:
1. ç®€å•çš„å¤„ç†: æ¯ä¸ªå‡½æ•°å¼€å§‹çš„æ—¶å€™
2. æŒ‡å®šçš„ç¬¦åˆæ¡ä»¶çš„æ—¶å€™,æŒ‚èµ·. å¦‚ä½•å®ç°å‘¢?

## æƒ³æ³•2

```cpp
generator<T> gen(int i){
    if( i == 0)
        co_yield i;
    gen(i-1);
}
```

`coroutine handle`(generator)åº”è¯¥è¦ä¿å­˜æˆ**å…¨å±€å˜é‡**


æƒ³è¦å®ç°çš„åŠŸèƒ½:

- é€’å½’å‡½æ•°åˆ°æŸä¸ªç‚¹å¯ä»¥`suspend`,ä½¿ç”¨`co_await std::suspend_alawys{};`
- æœ€ä¸Šå±‚çš„`coro`,å¯ä»¥`coro.resume()` è®©æ•´ä¸ª`coroutine`ç»§ç»­è¿è¡Œ,ç›´åˆ°ä¸‹ä¸€ä¸ªæš‚åœç‚¹,æˆ–ç»“æŸ
- å…³é”®ç‚¹åœ¨äºç†è§£`coroutine`çš„ç›¸äº’è°ƒç”¨æ—¶,å…·ä½“æ˜¯æ€æ ·è¿è¡Œ

```plaintext
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚ coro1 â”‚    co_await  -> coro.resume
   â””â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚ coro2 â”‚    co_await
   â””â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       v
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”
   â”‚ coro3 â”‚    suspend
   â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

å¦‚æœæƒ³è¦è®©ä¸€ä¸ª`coroutine`åœ¨è¿è¡Œæ—¶`suspend`,é‚£ä¹ˆæ˜¯ä¸æ˜¯è¦ä½¿ç”¨`co_await`(ä¸å…³å¿ƒ `initial_suspend`,`final_suspend`)? åº”è¯¥æ˜¯

é‚£ä¹ˆ`co_await`åº”è¯¥ä¼šåœ¨

ä¸å¦‚ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’äº†ğŸ˜…?
