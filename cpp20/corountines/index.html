<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>coroutine 协程 | C++笔记</title>
    <meta name="description" content="c++学习笔记大仓库">
    <link rel="stylesheet" href="/assets/style.bae725c2.css">
    <link rel="modulepreload" href="/assets/chunks/framework.218694e7.js">
    <link rel="modulepreload" href="/assets/cpp20_corountines_index.md.6f74965d.lean.js">
    <link rel="modulepreload" href="/assets/app.2ae854bd.js">
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <link rel="shortcut icon" href="/favicon/favicon.ico">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-7ef11698><!--[--><!--]--><!--[--><span tabindex="-1" data-v-4e83e303></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-4e83e303> Skip to content </a><!--]--><!----><header class="VPNav" data-v-7ef11698 data-v-7f2f2d3e><div class="VPNavBar has-sidebar" data-v-7f2f2d3e data-v-78fcdfc1><div class="container" data-v-78fcdfc1><div class="VPNavBarTitle has-sidebar" data-v-78fcdfc1 data-v-4a0fdfe4><a class="title" href="/" data-v-4a0fdfe4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/cppIcon.png" data-v-f0437616><!--]--> c++20 <!--[--><!--]--></a></div><div class="content" data-v-78fcdfc1><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-78fcdfc1 data-v-a50fa694><span id="main-nav-aria-label" class="visually-hidden" data-v-a50fa694>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/cpp11/" data-v-a50fa694 data-v-810a53c2 data-v-1e51e9aa><!--[-->c++11<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/cpp14/" data-v-a50fa694 data-v-810a53c2 data-v-1e51e9aa><!--[-->c++14<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/cpp17/" data-v-a50fa694 data-v-810a53c2 data-v-1e51e9aa><!--[-->c++17<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/cpp20/" data-v-a50fa694 data-v-810a53c2 data-v-1e51e9aa><!--[-->c++20<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-78fcdfc1 data-v-320a2f74><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-320a2f74 data-v-36843ece data-v-18060cee><span class="check" data-v-18060cee><span class="icon" data-v-18060cee><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-36843ece><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-36843ece><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-78fcdfc1 data-v-587caeb8 data-v-ee409c54><!--[--><a class="VPSocialLink" href="https://github.com/rbookr/cpp-hub" target="_blank" rel="noopener" data-v-ee409c54 data-v-0018c085><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-78fcdfc1 data-v-19a2aeb3 data-v-5d14c622><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-5d14c622><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-5d14c622><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-5d14c622><div class="VPMenu" data-v-5d14c622 data-v-2c7fcaaa><!----><!--[--><!--[--><!----><div class="group" data-v-19a2aeb3><div class="item appearance" data-v-19a2aeb3><p class="label" data-v-19a2aeb3>Appearance</p><div class="appearance-action" data-v-19a2aeb3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-19a2aeb3 data-v-36843ece data-v-18060cee><span class="check" data-v-18060cee><span class="icon" data-v-18060cee><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-36843ece><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-36843ece><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-19a2aeb3><div class="item social-links" data-v-19a2aeb3><div class="VPSocialLinks social-links-list" data-v-19a2aeb3 data-v-ee409c54><!--[--><a class="VPSocialLink" href="https://github.com/rbookr/cpp-hub" target="_blank" rel="noopener" data-v-ee409c54 data-v-0018c085><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-78fcdfc1 data-v-c5e2be0c><span class="container" data-v-c5e2be0c><span class="top" data-v-c5e2be0c></span><span class="middle" data-v-c5e2be0c></span><span class="bottom" data-v-c5e2be0c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-7ef11698 data-v-3549528e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-3549528e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-3549528e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-3549528e>Menu</span></button><a class="top-link" href="#" data-v-3549528e> Return to top </a></div><aside class="VPSidebar" data-v-7ef11698 data-v-b04b13c6><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-b04b13c6><span class="visually-hidden" id="sidebar-aria-label" data-v-b04b13c6> Sidebar Navigation </span><!--[--><div class="group" data-v-b04b13c6><section class="VPSidebarGroup collapsible" data-v-b04b13c6 data-v-4d70dcd0><div class="title" role="button" data-v-4d70dcd0><h2 class="title-text" data-v-4d70dcd0>c++20</h2><div class="action" data-v-4d70dcd0><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon minus" data-v-4d70dcd0><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon plus" data-v-4d70dcd0><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4d70dcd0><!--[--><a class="VPLink link link active" href="/cpp20/corountines/index.html" data-v-4d70dcd0 data-v-588aeca4 data-v-1e51e9aa><!--[--><span class="link-text" data-v-588aeca4>c++ corountines</span><!----><!--]--><!----></a><a class="VPLink link link" href="/cpp20/Literal_Classes_as_Non-type_Template_Parameters/index.html" data-v-4d70dcd0 data-v-588aeca4 data-v-1e51e9aa><!--[--><span class="link-text" data-v-588aeca4>c++ class as NonType parameter</span><!----><!--]--><!----></a><a class="VPLink link link" href="/cpp20/concept/index.html" data-v-4d70dcd0 data-v-588aeca4 data-v-1e51e9aa><!--[--><span class="link-text" data-v-588aeca4>concept</span><!----><!--]--><!----></a><a class="VPLink link link" href="/cpp20/concept/concept_library.html" data-v-4d70dcd0 data-v-588aeca4 data-v-1e51e9aa><!--[--><span class="link-text" data-v-588aeca4>concept library</span><!----><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-7ef11698 data-v-2e3a3010><div class="VPDoc has-sidebar has-aside" data-v-2e3a3010 data-v-f3534aea><div class="container" data-v-f3534aea><div class="aside" data-v-f3534aea><div class="aside-curtain" data-v-f3534aea></div><div class="aside-container" data-v-f3534aea><div class="aside-content" data-v-f3534aea><div class="VPDocAside" data-v-f3534aea data-v-caaf8d0c><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-caaf8d0c data-v-804cd58a><div class="content" data-v-804cd58a><div class="outline-marker" data-v-804cd58a></div><div class="outline-title" data-v-804cd58a>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-804cd58a><span class="visually-hidden" id="doc-outline-aria-label" data-v-804cd58a> Table of Contents for current page </span><ul class="root" data-v-804cd58a><!--[--><li style="" data-v-804cd58a><a class="outline-link" href="#哪些资源" data-v-804cd58a>哪些资源</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#what-is-a-coroutine" data-v-804cd58a>what is a coroutine?</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#限制" data-v-804cd58a>限制</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#q-coroutine-有些组件与概念" data-v-804cd58a>Q: coroutine 有些组件与概念</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#q-它们如何配合-组合" data-v-804cd58a>Q: 它们如何配合/组合</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#实例代码" data-v-804cd58a>实例代码</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#协程的执行过程是怎样的-coroutine-is-a-function-that-can-suspend-execution-to-be-resumed-later" data-v-804cd58a>协程的执行过程是怎样的 coroutine is a function that can suspend execution to be resumed later.</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#what-is-promise-object" data-v-804cd58a>what is promise Object</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#awaitable" data-v-804cd58a>awaitable</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#co-await-执行过程" data-v-804cd58a>co_await 执行过程</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#co-yield-执行过程" data-v-804cd58a>co_yield 执行过程</a><!----></li><li style="" data-v-804cd58a><a class="outline-link" href="#参考" data-v-804cd58a>参考</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-caaf8d0c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f3534aea><div class="content-container" data-v-f3534aea><!--[--><!--]--><main class="main" data-v-f3534aea><div style="position:relative;" class="vp-doc _cpp20_corountines_index" data-v-f3534aea><div><h1 id="coroutine-协程" tabindex="-1">coroutine 协程 <a class="header-anchor" href="#coroutine-协程" aria-hidden="true">#</a></h1><h2 id="哪些资源" tabindex="-1">哪些资源 <a class="header-anchor" href="#哪些资源" aria-hidden="true">#</a></h2><ul><li><a href="https://www.scs.stanford.edu/~dm/blog/c++-coroutines.html" target="_blank" rel="noreferrer">My tutorial and take on C++20 coroutines</a><ul><li><a href="https://github.com/rbookr/cpp-hub/blob/master/cpp20/corountines/c%2B%2B-coroutines.pdf" target="_blank" rel="noreferrer">我存的github地址</a></li></ul></li><li>很好的视频教程 <a href="https://b23.tv/wyaKYsL" target="_blank" rel="noreferrer">C++ 20 的协程其实就是一首歌？-哔哩哔哩</a><ul><li>对应的教案 <a href="https://www.bennyhuo.com/book/cpp-coroutines/00-foreword.html" target="_blank" rel="noreferrer">https://www.bennyhuo.com/book/cpp-coroutines/00-foreword.html</a></li></ul></li><li><a href="https://en.cppreference.com/w/cpp/language/coroutines" target="_blank" rel="noreferrer">Coroutines (C++20) - cppreference.com</a></li></ul><h2 id="what-is-a-coroutine" tabindex="-1">what is a coroutine? <a class="header-anchor" href="#what-is-a-coroutine" aria-hidden="true">#</a></h2><blockquote><p>A coroutine is a function that can suspend execution to be resumed later.</p></blockquote><p>协程必须包含这个三个运算符 <code>co_await</code> <code>co_yield</code> <code>co_return</code> 一个或多个.</p><h2 id="限制" tabindex="-1">限制 <a class="header-anchor" href="#限制" aria-hidden="true">#</a></h2><p>协程不能使用变长实参，普通的 return 语句，或占位符返回类型（auto 或 Concept）。 constexpr 函数、构造函数、析构函数及 main 函数 不能是协程。</p><h2 id="q-coroutine-有些组件与概念" tabindex="-1">Q: coroutine 有些组件与概念 <a class="header-anchor" href="#q-coroutine-有些组件与概念" aria-hidden="true">#</a></h2><ul><li>keywords / operator <ul><li>co_await</li><li>co_return</li><li>co_yield</li></ul></li><li>concept 概念 <ul><li>promise object,承诺对象 <ul><li>如果通过<code>std::coroutine_traits</code>根据协程的返回类型来得到<code>promise_type</code></li><li><code>promise object</code> 如何在<code>construct</code></li><li><code>promise object</code> 在heap的state上</li><li><code>promise object</code> 内部的成员函数何时被调用</li></ul></li><li>coroutine handle,协程句柄 <ul><li>相当于一个指针</li><li>如何得到句柄</li><li>如何赋值?</li></ul></li><li>coroutine state,协程状态 <ul><li>running</li><li>suspend</li><li>resumed</li><li>finish</li></ul></li></ul></li></ul><h3 id="_1-q-which-is-promise-object" tabindex="-1">1 Q which is promise object <a class="header-anchor" href="#_1-q-which-is-promise-object" aria-hidden="true">#</a></h3><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//协程的返回对象</span></span>
<span class="line"><span style="color:#C792EA;">struct</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">MyRet</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    //协程的返回对象,必须有 promise_type</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">struct</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">promise_type</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;"> //这个就是 promise object</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">MyRet</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">get_return_object</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">coroutine_handle</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">promise_type</span><span style="color:#89DDFF;">&gt;::</span><span style="color:#82AAFF;">from_promise</span><span style="color:#89DDFF;">(*this)};</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">suspend_always</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">initial_suspend</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">noexcept</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">suspend_always</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">final_suspend</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">noexcept</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{};</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">return_void</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">unhandled_exception</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>如何理解,其实是理解它执行的过程</p><p>如果有一个协程如:<code>MyRet coro()</code>,当你第一次执行它时</p><blockquote><p>When a coroutine begins execution, it performs the following:</p><ul><li>allocates the coroutine state object using operator new (see below)</li><li>copies all function parameters to the coroutine state: by-value parameters are moved or copied, by-reference parameters remain references (and so may become dangling if the coroutine is resumed after the lifetime of referred object ends)</li><li>calls the constructor for the promise object. If the promise type has a constructor that takes all coroutine parameters, that constructor is called, with post-copy coroutine arguments. Otherwise the default constructor is called.</li><li>calls promise.get_return_object() and keeps the result in a local variable. The result of that call will be returned to the caller when the coroutine first suspends. Any exceptions thrown up to and including this step propagate back to the caller, not placed in the promise.</li><li>calls promise.initial_suspend() and co_awaits its result. Typical Promise types either return a suspend_always, for lazily-started coroutines, or suspend_never, for eagerly-started coroutines.</li><li>when co_await promise.initial_suspend() resumes, starts executing the body of the coroutine</li></ul><p>When a coroutine reaches a suspension point</p><ul><li>the return object obtained earlier is returned to the caller/resumer, after implicit conversion to the return type of the coroutine, if necessary.</li></ul><p>When a coroutine reaches the co_return statement, it performs the following:</p><ul><li>calls promise.return_void() for <ul><li>co_return;</li><li>co_return expr where expr has type void</li><li>falling off the end of a void-returning coroutine. The behavior is undefined if the Promise type has no Promise::return_void() member function in this case.</li></ul></li><li>or calls promise.return_value(expr) for co_return expr where expr has non-void type</li><li>destroys all variables with automatic storage duration in reverse order they were created.</li><li>calls promise.final_suspend() and co_awaits the result.</li></ul><p>If the coroutine ends with an uncaught exception, it performs the following:</p><ul><li>catches the exception and calls promise.unhandled_exception() from within the catch-block</li><li>calls promise.final_suspend() and co_awaits the result (e.g. to resume a continuation or publish a result). It&#39;s undefined behavior to resume a coroutine from this point.</li></ul><p>When the coroutine state is destroyed either because it terminated via co_return or uncaught exception, or because it was destroyed via its handle, it does the following:</p><ul><li>calls the destructor of the promise object.</li><li>calls the destructors of the function parameter copies.</li><li>calls operator delete to free the memory used by the coroutine state</li><li>transfers execution back to the caller/resumer.</li></ul></blockquote><h2 id="q-它们如何配合-组合" tabindex="-1">Q: 它们如何配合/组合 <a class="header-anchor" href="#q-它们如何配合-组合" aria-hidden="true">#</a></h2><p><img src="/assets/142543013.2db24f09.jpg" alt="来自 B站up bennyhuo不是算命的"></p><h2 id="实例代码" tabindex="-1">实例代码 <a class="header-anchor" href="#实例代码" aria-hidden="true">#</a></h2><h2 id="协程的执行过程是怎样的-coroutine-is-a-function-that-can-suspend-execution-to-be-resumed-later" tabindex="-1">协程的执行过程是怎样的 coroutine is a function that can suspend execution to be resumed later. <a class="header-anchor" href="#协程的执行过程是怎样的-coroutine-is-a-function-that-can-suspend-execution-to-be-resumed-later" aria-hidden="true">#</a></h2><p>协程与以下对象关联</p><ul><li>promise object</li><li>coroutine_handle</li><li>coroutine state <ul><li>promise obeject</li><li>arguments (all copied by value)</li><li>stop point,使得恢复时程序知晓要从何处继续，销毁时知晓有哪些局部变量在作用域内</li><li>生存期跨过当前暂停点的局部变量和临时量</li></ul></li></ul><h2 id="what-is-promise-object" tabindex="-1">what is promise Object <a class="header-anchor" href="#what-is-promise-object" aria-hidden="true">#</a></h2><p>responsibilites of coroutine-Promise;</p><ul><li><p>return_void()/return_value()/yield_value()</p></li><li><p>unhandle_exception()</p></li><li><p>c++20 的 coroutine 是给库的开发者使用的，所以看起来比较复杂</p></li><li><p>c++20 的 coroutine 标签只包含编译器需要实现的底层功能，并没有简单方便的高级库</p></li></ul><h2 id="awaitable" tabindex="-1">awaitable <a class="header-anchor" href="#awaitable" aria-hidden="true">#</a></h2><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"></span></code></pre><div class="line-numbers-wrapper"></div></div><p>promise object coroutine handle coroutine state</p><p>concept</p><ul><li>awaitable , awaiter</li></ul><p>new lanauge keywords</p><ul><li>co_await</li><li>co_yield</li><li>co_return</li></ul><p>new types</p><ul><li><code>coroutine_handle&lt;P&gt;</code></li><li><code>coroutine_traits&lt;Ts...&gt;</code></li><li>suspend_always</li><li>suspend_never</li></ul><p>general mechanism facility</p><p>Two kinds of interfaces that are defined by the coroutines</p><ul><li>Promise</li><li>Awaitable</li></ul><h2 id="co-await-执行过程" tabindex="-1">co_await 执行过程 <a class="header-anchor" href="#co-await-执行过程" aria-hidden="true">#</a></h2><ol><li><code>co_await</code> is a unary operator.</li><li>effect: suspend coroutine and return control to the caller.</li><li>expr define <code>operator co_await</code></li></ol><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">co_await</span><span style="color:#A6ACCD;"> expr</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>expr</code>通常是一个<code>awaiter</code>对象,叫做等待器</p><p>写法如下:</p><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#C792EA;">struct</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">MyAwaiter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">bool</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">await_ready</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">false;</span><span style="color:#676E95;font-style:italic;"> //--&gt; 暂停--&gt;await_suspend</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">await_suspend</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#FFCB6B;">coroutine_handle</span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">h</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">bool</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">await_suspend</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">coroutine_handle</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">await_suspend</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  //throws: rethrows on resume</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  //它的结果 就是整个co_await expr 的结果</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">  //它在恢复的时候被执行</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">void</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">await_resume</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">await_resume</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#F07178;">}</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>简易的执行过程如下,具体的看这里 <a href="https://en.cppreference.com/w/cpp/language/coroutines#co_await" target="_blank" rel="noreferrer">https://en.cppreference.com/w/cpp/language/coroutines#co_await</a></p><p>await_ready 返回 bool 类型，如果返回 true，则表示已经就绪，无需挂起；否则表示需要挂起。</p><p>await_ready 返回 false 时，协程就挂起了。这时候协程的局部变量和挂起点都会被存入协程的状态当中，await_suspend 被调用到。</p><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#89DDFF;">???</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">await_suspend</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">std</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">coroutine_handle</span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> coroutine_handle</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>参数 coroutine_handle 用来表示当前协程，我们可以在稍后合适的时机通过调用 resume 来恢复执行当前协程：</p><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#A6ACCD;">coroutine_handle</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resume</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意到 await_suspend 函数的返回值类型我们没有明确给出，因为它有以下几种选项：</p><ul><li>返回 void 类型或者返回 true，表示当前协程挂起之后将执行权还给当初调用或者恢复当前协程的函数。</li><li>返回 false，则恢复执行当前协程。注意此时不同于 await_ready 返回 true 的情形，此时协程已经挂起，await_suspend 返回 false 相当于挂起又立即恢复。</li><li>返回其他协程的 coroutine_handle 对象，这时候返回的 coroutine_handle 对应的协程被恢复执行。</li><li>抛出异常，此时当前协程恢复执行，并在当前协程当中抛出异常。</li></ul><p>可见，await_suspend 支持的情况非常多，也相对复杂。实际上这也是 C++ 协程当中最为核心的函数之一了。</p><h3 id="await-resume" tabindex="-1"><a href="#await-resume">#</a> await_resume <a class="header-anchor" href="#await-resume" aria-hidden="true">#</a></h3><p>协程恢复执行之后，等待体的 await_resume 函数被调用。</p><pre><code>??? await_resume()；
</code></pre><p>1</p><p>同样地，await_resume 的返回值类型也是不限定的，返回值将作为 <code>co_await</code> 表达式的返回值。</p><h2 id="co-yield-执行过程" tabindex="-1"><code>co_yield</code> 执行过程 <a class="header-anchor" href="#co-yield-执行过程" aria-hidden="true">#</a></h2><p><code>co_yield</code>会返回一个值然后挂起协程.</p><p>等价于</p><div class="language-cpp line-numbers-mode"><button class="copy"></button><span class="lang">cpp</span><pre><code><span class="line"><span style="color:#89DDFF;font-style:italic;">co_await</span><span style="color:#A6ACCD;"> promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">yield_value</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">expr</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>也就是说它 其它是调用了<code>promise object</code>的<code>yield_value</code> 函数</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">std::suspend_always yield_value(int a){</span></span>
<span class="line"><span style="color:#A6ACCD;">  // save into promise object</span></span>
<span class="line"><span style="color:#A6ACCD;">  return {};</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>所以它的具体执行的过程应该去看<code>co_await</code>,只不过<code>co_yield</code>把结果传给了<code>promise.yield_value</code> 整个执行的过程应该分成了四个大的过程</p><h3 id="_1-convert-to-awaitable" tabindex="-1">1. convert to awaitable <a class="header-anchor" href="#_1-convert-to-awaitable" aria-hidden="true">#</a></h3><ol><li>就是<code>expr</code>本身(简化了,具体看cppreference上原文)</li><li>当前的<code>promise_type</code>有一个成员函数<code>await_transform</code>,那么<code>awaitable</code>就是<code>promise.await_transform(expr)</code></li></ol><h3 id="_2-get-awaiter" tabindex="-1">2. get awaiter <a class="header-anchor" href="#_2-get-awaiter" aria-hidden="true">#</a></h3><ol><li>the awaiter is <code>operator co_await()</code></li><li>自己本身</li></ol><h3 id="_3-call-awaiter-await-ready" tabindex="-1">3. call <code>awaiter.await_ready()</code> <a class="header-anchor" href="#_3-call-awaiter-await-ready" aria-hidden="true">#</a></h3><ol><li>调用 <code>awaiter.await_ready()</code></li><li>根据结果来决定是否暂停</li><li><code>false</code></li></ol><ul><li>暂停协程</li><li>调用<code>awaiter.await_suspend(handle)</code><ul><li>如果<code>await_suspend</code>返回<code>void</code>,此协程保持暂停,返回控制给调用方</li><li>如果<code>await_suspend</code>返回<code>bool</code>, <ul><li>值为<code>true</code>,此协程保持暂停,返回控制给调用方</li><li>值为<code>false</code>,恢复此协程</li></ul></li><li>如果<code>await_suspend</code>返回其它协程<code>other_hanle</code>,调用<code>other_hanle.resume()</code>,恢复该协程（注意这可以连锁进行，并最终导致当前协程恢复）</li><li>如果 <code>await_suspend</code> 抛出异常，那么捕捉该异常，恢复协程，并立即重抛异常</li></ul></li><li>最后，调用 <code>awaiter.await_resume()</code>，它的结果就是整个 <code>co_await expr</code> 表达式的结果</li></ul><h3 id="_4-call-awaiter-await-resume" tabindex="-1">4. call <code>awaiter.await_resume()</code> <a class="header-anchor" href="#_4-call-awaiter-await-resume" aria-hidden="true">#</a></h3><p>一个疑问,协程A调用协程B,如果B暂停,那么A暂停,否则A不暂停,怎么实现呢?</p><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">A        -&gt;        B</span></span>
<span class="line"><span style="color:#A6ACCD;">handle A -&gt; handle B</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">co_await function B()  -&gt; bool</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-hidden="true">#</a></h2><ul><li>很好的视频教程 <a href="https://b23.tv/wyaKYsL" target="_blank" rel="noreferrer">C++ 20 的协程其实就是一首歌？-哔哩哔哩</a><ul><li>对应的教案 <a href="https://www.bennyhuo.com/book/cpp-coroutines/00-foreword.html" target="_blank" rel="noreferrer">https://www.bennyhuo.com/book/cpp-coroutines/00-foreword.html</a></li></ul></li><li><a href="https://zhuanlan.zhihu.com/p/59178345" target="_blank" rel="noreferrer">c++20协程入门 - 知乎</a></li><li><a href="https://zhuanlan.zhihu.com/p/58784652" target="_blank" rel="noreferrer">C++网络编程之asio(五)——在asio中使用协程 - 知乎</a></li><li><a href="https://lewissbaker.github.io/2017/11/17/understanding-operator-co-await" target="_blank" rel="noreferrer">C++ Coroutines: Understanding operator co_await | Asymmetric Transfer</a></li><li>看这个能看懂 <a href="https://www.youtube.com/watch?v=7sKUAyWXNHA" target="_blank" rel="noreferrer">Pavel Novikov - &quot;Understanding Coroutines by Example&quot; - C++ London - YouTube</a></li><li><a href="https://www.youtube.com/watch?v=vzC2iRfO_H8" target="_blank" rel="noreferrer">Andreas Buhr: C++ Coroutines - YouTube</a></li><li>an awaitable which suspends every second time <a href="https://medium.com/nerd-for-tech/painless-c-coroutines-part-1-ba90dd101adb" target="_blank" rel="noreferrer">Painless C++ Coroutines -Part 1. Learn how to cretae a simple coroutine | by Gajendra Gulgulia | May, 2021 | Medium | Nerd For Tech</a></li></ul></div></div></main><footer class="VPDocFooter" data-v-f3534aea data-v-0a05139d><div class="edit-info" data-v-0a05139d><div class="edit-link" data-v-0a05139d><a class="VPLink link edit-link-button" href="https://github.com/rbookr/cpp-hub/edit/master/cpp20/corountines/index.md" target="_blank" rel="noreferrer" data-v-0a05139d data-v-1e51e9aa><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-0a05139d><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-0a05139d><div class="pager" data-v-0a05139d><!----></div><div class="pager" data-v-0a05139d><a class="pager-link next" href="/cpp20/Literal_Classes_as_Non-type_Template_Parameters/index.html" data-v-0a05139d><span class="desc" data-v-0a05139d>Next page</span><span class="title" data-v-0a05139d>c++ class as NonType parameter</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"1.md\":\"d294f00a\",\"cpp11_todo_from_rbook_index.md\":\"4ed1018a\",\"cpp11_todo_from_rbook_lambda.md\":\"35687018\",\"cpp11_todo_from_rbook_random.md\":\"4f0d0e62\",\"cpp11_todo_from_rbook_random_shuffle.md\":\"4747b86a\",\"cpp11_todo_from_rbook_std_visit.md\":\"c503d4b7\",\"cpp11_todo_from_rbook_thread_condition_variable.md\":\"a9e4795f\",\"cpp11_todo_from_rbook_关键字.md\":\"fac749cc\",\"cpp11_todo_from_rbook_工具库.md\":\"98ece86c\",\"cpp11_todo_from_rbook_新特性.md\":\"3e485be9\",\"cpp11_todo_from_rbook_记录.md\":\"60e9360c\",\"cpp11_user-defined-literals_index.md\":\"9dca6be9\",\"cpp11_alignof_1.md\":\"6e9c6e7d\",\"cpp11_atomic_1.md\":\"39132d64\",\"cpp11_atomic_atomic_flag.md\":\"2546bcb3\",\"cpp11_condition_variable_1.md\":\"5c8afa2f\",\"cpp11_enable_shared_from_this.md\":\"45091c9b\",\"cpp11_exception_ptr_1.md\":\"d9028068\",\"cpp11_forward_index.md\":\"b8c26e9f\",\"cpp11_forward_list_1.md\":\"cababac3\",\"cpp11_future_1.md\":\"f4101fec\",\"cpp11_index.md\":\"d843a95c\",\"cpp11_initializer_list_1.md\":\"a1de7ddc\",\"cpp11_inline_namespace.md\":\"119307e5\",\"cpp11_integral_constant.md\":\"13fb7263\",\"cpp11_memory_align.md\":\"09ebe9b0\",\"cpp11_noexcept_1.md\":\"3ba335e7\",\"cpp11_refercence_wrappers_index.md\":\"8ffc9b36\",\"cpp11_regex_1.md\":\"70f048a8\",\"cpp11_smart-pointer_weak_ptr.md\":\"5d08d2e6\",\"cpp11_using_1.md\":\"1c33c99d\",\"cpp11_value_categories_index.md\":\"0fbd5918\",\"cpp11_强制转换_1.md\":\"00564cfb\",\"cpp11_模板的模板参数_1.md\":\"0982b89b\",\"cpp14_delctype_auto_index.md\":\"924b10e7\",\"cpp14_make_index_seq_integer_sequence.md\":\"649c832a\",\"cpp14_make_index_seq_make_index_sequence原理.md\":\"cb864fb4\",\"cpp17_pmr_index.md\":\"8b832a8a\",\"cpp17_any_1.md\":\"7f5237fa\",\"cpp17_in_place_1.md\":\"a88cf5b4\",\"cpp17_meta_programing_is_invocable.md\":\"dceb3a31\",\"cpp17_optional_1.md\":\"6a180d39\",\"cpp17_string_view_1.md\":\"2ff6bf2c\",\"cpp17_thread_shared_mutex.md\":\"3cf9a67c\",\"cpp17_variant_1.md\":\"279ee41e\",\"cpp17_类模板实参推导.md\":\"2c72096f\",\"cpp20_literal_classes_as_non-type_template_parameters_index.md\":\"6002d5a7\",\"cpp20_common_reference_index.md\":\"4bf37885\",\"cpp20_concept_concept_library.md\":\"528a8077\",\"cpp20_concept_index.md\":\"2694894d\",\"cpp20_corountines_bili.md\":\"bcd5e282\",\"cpp20_corountines_index.md\":\"6f74965d\",\"cpp20_corountines_recursive-coroutines_1.md\":\"af8d7937\",\"cpp20_corountines_recursive-coroutines_readme.md\":\"6718c25d\",\"cpp20_corountines_代码说明.md\":\"b10d3616\",\"cpp20_corountines_学习过程.md\":\"3badeafc\",\"cpp20_index.md\":\"ae53fc2e\",\"cpp20_ranges_code_myranges_1.md\":\"8a256b87\",\"cpp20_ranges_code_myranges_readme.md\":\"9077e430\",\"cpp20_ranges_code_myranges_zhihu.md\":\"1f306385\",\"cpp20_ranges_cpprangebasefor如何工作.md\":\"955fbb00\",\"cpp20_ranges_index.md\":\"e7346a20\",\"cpp20_ranges_ranges_seq_operations.md\":\"6ca412b5\",\"cpp20_ranges_自己实现ranges.md\":\"47b5b6f8\",\"cpp20_泛型lambda.md\":\"078a7343\",\"cppold_class_member_pointer.md\":\"13e603d1\",\"cppold_curiously_recurring_template_pattern.md\":\"ed082104\",\"cppold_index.md\":\"527e55cb\",\"cppold_iterator.md\":\"54182cb7\",\"cppold_unamed_namespace.md\":\"d81ffd8d\",\"cpp常用网站.md\":\"d1a4a5f8\",\"cpp强制类型转换.md\":\"252af679\",\"index.md\":\"b0170f60\",\"mycode_range.md\":\"7521c20c\",\"mythreadpool_readme.md\":\"221729da\",\"readme.md\":\"47ae03fb\",\"template_sfinae.md\":\"6d8e2e9f\",\"template_readme.md\":\"1f2c573a\",\"template_常量模板参数.md\":\"727e06c6\",\"third-lib_catch2_index.md\":\"71112e58\",\"third-lib_cppitertools_index.md\":\"2cf78792\",\"third-lib_index.md\":\"780ef2ae\",\"其它_1.md\":\"155ddecf\",\"奇技淫巧_cpp20标准下简洁地遍历tuple_readme.md\":\"a1bce125\",\"奇技淫巧_memory_pool_memorypool_readme.md\":\"ca4f6b67\",\"奇技淫巧_memory_pool_memorypool_rainboy_learn.md\":\"fb20c728\",\"奇技淫巧_memory_pool_fixedsize_memorypool_simpread-性能优化 - 内存池的设计和实现.md\":\"a27a40d2\",\"奇技淫巧_memory_pool_readme.md\":\"ae5b98d5\",\"奇技淫巧_memory_pool2_readme.md\":\"af9147d0\",\"奇技淫巧_同一类内部的模板类.md\":\"a088dc57\",\"奇技淫巧_技巧集合.md\":\"1f6be25e\",\"奇技淫巧_无锁队列.md\":\"42c04ce2\",\"奇技淫巧_父类中有子类类型.md\":\"ced7ee35\",\"收集的好文章_如何正确地学习cpp的模板和模板元编程.md\":\"dcd44bf6\",\"无锁队列_无锁队列.md\":\"e83f86a7\",\"读书笔记_modern_cpp_challenge_index.md\":\"1b20284f\",\"读书笔记_professional_cpp_5th_episode20_index.md\":\"962cfa4c\",\"读书笔记_professional_cpp_5th_episode25_index.md\":\"d0ace843\",\"读书笔记_professional_cpp_5th_index.md\":\"a5ffcfc2\",\"读书笔记_functional_programming_in_cpp_index.md\":\"4a537b4d\",\"读书笔记_index.md\":\"327a5d0b\",\"读书笔记_提高cpp性能的编程技术_1.md\":\"1cec1a25\"}")</script>
    <script type="module" async src="/assets/app.2ae854bd.js"></script>
    
  </body>
</html>